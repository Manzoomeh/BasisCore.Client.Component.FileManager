(()=>{var __webpack_modules__={774:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(645),n=i.n(r),a=i(667),o=i.n(a),d=new URL(i(167),i.b),s=n()((function(e){return e[1]})),l=o()(d);s.push([e.id,'\r\ndiv[data-fm-id="main"] {\r\n    position: relative;\r\n    background-color: #f9f9f9;\r\n    height: 100%;\r\n}\r\n\r\nspan[data-fm-tree="title"] {\r\n    font-family: \'arial\';\r\n    font-size: 14px;\r\n}\r\ndiv[data-fm-tree="tree"] {\r\n    height: 100%;\r\n    float: left;\r\n    width: 16.5%;\r\n    min-height: 300px;\r\n    border-right: 1px solid #000;\r\n    background: #35414f;\r\n    color: #fff;\r\n    padding-top: 20px;\r\n    line-height: 30px;\r\n}\r\ndiv[data-fm-tree="tree"] ul {\r\n    padding-left: 20px;\r\n}\r\ndiv[data-fm-view="content"] {\r\n    width: 100%;\r\n    border: 1px solid var(--light_gray);\r\n    border-radius: 5px;\r\n    background-color: #fff;\r\n}\r\n.clr {\r\n    clear: both\r\n}\r\ndiv[data-fm-container="container"] {\r\n    width: 83.4%;\r\n    float: left;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n}\r\ndiv[data-fm-view="controller"] {\r\n    border-bottom: 1px solid #eee;\r\n}\r\ndiv[data-fm-controller="body"] {\r\n    border: 1px solid var(--light_gray);\r\n    border-radius: 5px;\r\n    background-color: #fff;\r\n}\r\ndiv[data-fm-view="controller"] button {\r\n    float: right;\r\n    margin: 10px;\r\n    font-family: \'arial\';\r\n    font-size: 13px;\r\n    background-color: rgb(243, 241, 241);\r\n    border-radius: 3px;\r\n    border: 1px solid rgb(107, 107, 107);\r\n}\r\nspan[data-fm-tree="expand"] {\r\n    margin-left: 3px;\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n    width: 10px;\r\n}\r\ndiv[data-fm-view="view"] {\r\n    padding: 10px;\r\n}\r\ndiv[data-fm-view="view"] table {\r\n    width: 100%;\r\n}\r\ndiv[data-fm-controller="arrowKey"] {\r\n    width: 60px;\r\n    float: left;\r\n    height: 30px;\r\n    direction: ltr;\r\n    text-align: left;\r\n}\r\ndiv[data-fm-controller="arrowKey"] button {\r\n    margin: 3px;\r\n    cursor: pointer;\r\n}\r\ndiv[data-fm-path="path"] {\r\n    line-height: 30px;\r\n    width: calc(100% - 90px);\r\n    float: left;\r\n}\r\ndiv[data-fm-path="path"] span {\r\n    margin-left: 3px;\r\n}\r\ndiv[data-fm-path="path"] div {\r\n    float: left;\r\n}\r\ndiv[data-fm-view="items"] {\r\n    width: 19%;\r\n    float: left;\r\n    text-align: center;\r\n    height: 120px;\r\n    padding: 10px;\r\n    margin: 2%;\r\n    background: rgb(244, 244, 244);\r\n    border-radius: 5px;\r\n}\r\ntd img {\r\n    margin-right: 10px;\r\n    margin-bottom: -3px;\r\n    ;\r\n}\r\ndiv[data-fm-path="startPath"] {\r\n    color: rgb(182, 67, 13);\r\n}\r\nspan[data-fm-tree-isSelected="true"] {\r\n    background-color: #657a97;\r\n}\r\n\r\ndiv[data-fm-folderDialogBox="container"] {\r\n    position: absolute;\r\n    width: 100%;\r\n    top: 200px;\r\n    display: none;\r\n    right: 0;\r\n}\r\ndiv[data-fm-fileDialogBox="container"] {\r\n    position: absolute;\r\n    width: 100%;\r\n    top: 200px;\r\n    display: none;\r\n    right: 0;\r\n}\r\ndiv[data-fm-dialogBox="addFolder"] {\r\n    margin: 0 auto;\r\n    width: 350px;\r\n    height: 200px;\r\n    background-color: #fff;\r\n    border: 1px solid rgb(49, 49, 49);\r\n    border-radius: 3px;\r\n    text-align: center;\r\n}\r\ndiv[data-fm-dialogBox="addFile"] {\r\n    margin: 0 auto;\r\n    width: 350px;\r\n    height: 150px;\r\n    background-color: #fff;\r\n    border: 1px solid rgb(49, 49, 49);\r\n    border-radius: 3px;\r\n    text-align: center;\r\n}\r\ndiv[data-fm-dialogBox="addFolder"] form, div[data-fm-dialogBox="addFile"] form {\r\n    padding: 15px 20px 20px 20px;\r\n}\r\ndiv[data-fm-dialogBox="addFolder"] input, div[data-fm-dialogBox="addFile"] input {\r\n    border: 1px solid rgb(49, 49, 49);\r\n    height: 25px;\r\n    line-height: 25px;\r\n    color: #333;\r\n    width: 90%;\r\n    padding: 0 10px;\r\n    margin-bottom: 10px;\r\n}\r\ndiv[data-fm-dialogBox="addFolder"] textarea {\r\n    border: 1px solid rgb(49, 49, 49);\r\n    height: 50px;\r\n    line-height: 25px;\r\n    color: #333;\r\n    width: 90%;\r\n    padding: 10px;\r\n    margin-bottom: 10px;\r\n}\r\ndiv[data-fm-folderDialogBox="closeBox"], div[data-fm-fileDialogBox="closeBox"] {\r\n    background-color: rgb(228, 228, 228);\r\n    padding: 3px;\r\n}\r\ndiv[data-fm-folderDialogBox="close"], div[data-fm-fileDialogBox="close"] {\r\n    border: 1px solid #000;\r\n    width: 15px;\r\n    height: 15px;\r\n    line-height: 15px;\r\n    cursor: pointer;\r\n}\r\ndiv[data-fm-folderDialogBox="background"], div[data-fm-fileDialogBox="background"] {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    background-color: #000;\r\n    opacity: 0.2;\r\n    width: 100%;\r\n    height: 100%;\r\n    display: none;\r\n}\r\nbutton[data-fm-dialogBox-btn="createFolder"], button[data-fm-dialogBox-btn="addFile"] {\r\n    float: right;\r\n}\r\ndiv[data-fm-user="permission"] {\r\n    float: left;\r\n    margin: 10px;\r\n}\r\ndiv[data-fm-user="permission"] span {\r\n    margin-right: 20px;\r\n    font-size: 12px;\r\n    display: inline-block;\r\n}\r\nhr {\r\n    margin: 10px 0;\r\n    color: #eee;\r\n}\r\ndiv[data-fm-disabled="true"] {\r\n    color: #ccc;\r\n    cursor: inherit !important;\r\n}\r\na[data-fm-view-download="icon"] {\r\n    width: 22px;\r\n    height: 22px;\r\n    display: inline-block;\r\n    background-image: url('+l+');\r\n}\r\ndiv[data-fm-view-uploadDate="uploadDate"] {\r\n    font-size: 12px;\r\n    margin-bottom: 10px;\r\n}\r\ndiv[data-fm-view-size="size"] {\r\n    font-size: 12px;\r\n    float: right;\r\n}\r\ndiv[data-fm-view-size="size"] span {\r\n    font-size: 12px;\r\n}\r\ndiv[data-fm-view-url="url"] {\r\n    font-size: 12px;\r\n    float: left;\r\n}\r\n\r\ndiv[data-fm-view="controller"] button {\r\n    color: var(--dark_gray);\r\n    background-color: #fff;\r\n    border: 1px solid var(--gray);\r\n    border-radius: 3px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    padding: 5px;\r\n    margin-right: 5px;\r\n    color: var(--dark_gray);\r\n    text-align: center;\r\n    cursor: pointer;\r\n}\r\nbutton i {\r\n    font-size: 22px !important;\r\n    display: block !important;\r\n}\r\ndiv[data-fm-view="view"] table {\r\n    width: 100%;\r\n    color: var(--dark_gray);\r\n    border-collapse: collapse;\r\n    box-sizing: border-box;\r\n}\r\ndiv[data-fm-view="view"] table .textleft {\r\n    text-align: left;\r\n    padding-left: 30px;\r\n}\r\ndiv[data-fm-view="view"] table th:first-child {\r\n    border-top-right-radius: 3px;\r\n}\r\ndiv[data-fm-view="view"] table th {\r\n    padding: 10px 5px;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    background-color: var(--light_gray);\r\n}\r\ndiv[data-fm-view="view"] table td {\r\n    padding: 10px 5px;\r\n    vertical-align: middle;\r\n    font-size: 14px;\r\n}\r\ndiv[data-fm-view="view"] table tr {\r\n    border-bottom: 1px solid var(--light_gray);\r\n}\r\ndiv[data-fm-view="view"] table tr:nth-child(2n+1) td {\r\n    background-color: var(--vlight_gray);\r\n}\r\ndiv[data-fm-view="view"] table .textCenter {\r\n    text-align: center;\r\n}\r\n',""]);const c=s},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(n[o]=!0)}for(var d=0;d<e.length;d++){var s=[].concat(e[d]);r&&n[s[0]]||(i&&(s[2]?s[2]="".concat(i," and ").concat(s[2]):s[2]=i),t.push(s))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},806:(e,t,i)=>{"use strict";var r=i(379),n=i.n(r),a=i(795),o=i.n(a),d=i(569),s=i.n(d),l=i(565),c=i.n(l),p=i(216),u=i.n(p),m=i(589),h=i.n(m),f=i(774),v={};v.styleTagTransform=h(),v.setAttributes=c(),v.insert=s().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=u(),n()(f.Z,v),f.Z&&f.Z.locals&&f.Z.locals},379:e=>{"use strict";var t=[];function i(e){for(var i=-1,r=0;r<t.length;r++)if(t[r].identifier===e){i=r;break}return i}function r(e,r){for(var a={},o=[],d=0;d<e.length;d++){var s=e[d],l=r.base?s[0]+r.base:s[0],c=a[l]||0,p="".concat(l," ").concat(c);a[l]=c+1;var u=i(p),m={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(t[u].references++,t[u].updater(m)):t.push({identifier:p,updater:n(m,r),references:1}),o.push(p)}return o}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var a=r(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var d=i(a[o]);t[d].references--}for(var s=r(e,n),l=0;l<a.length;l++){var c=i(a[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=s}}},569:e=>{"use strict";var t={};e.exports=function(e,i){var r=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},565:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var r=i.css,n=i.media,a=i.sourceMap;n?e.setAttribute("media",n):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},949:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>BcComponent});var _FileManager_FileManager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(778),__awaiter=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function d(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,d)}s((r=r.apply(e,t||[])).next())}))};class BcComponent{constructor(e){this.owner=e,this.container=document.createElement("div"),this.container.setAttribute("data-fm-id","main"),this.owner.setContent(this.container)}initializeAsync(){return __awaiter(this,void 0,void 0,(function*(){const options=eval(yield this.owner.getAttributeValueAsync("fm-options"));this.options=options,this.fileManager=yield _FileManager_FileManager__WEBPACK_IMPORTED_MODULE_0__.Z.createFileManagerAsync(this.container,this.options)}))}runAsync(e){return __awaiter(this,void 0,void 0,(function*(){return!0}))}}},778:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(888),n=i(26),a=i(283),o=(i(806),function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function d(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,d)}s((r=r.apply(e,t||[])).next())}))});class d{constructor(e,t,i){this.userHistory=[],this.historyCurrentIndex=0,this.container=e,this.options=t,this.culture=t.culture,this.api=i;const[o,s,l]=d.initialize(e);this.components=[new r.Z(o,this),new a.Z(l,this),new n.Z(s,this)],this.nextKey=this.container.querySelector('[data-fm-arrowKey="next"]'),this.prevKey=this.container.querySelector('[data-fm-arrowKey="prev"]'),this.addingHandler()}getPermission(){return o(this,void 0,void 0,(function*(){const e=this.requestJsonAsync(this.options.api.userPermissionApi,"POST",{userid:123});return this.userPermission=yield e,Promise.resolve()}))}getSetting(){return o(this,void 0,void 0,(function*(){const e=this.requestJsonAsync(this.options.api.userSettingApi,"POST",{userid:123});return console.log(e),this.userSetting=yield e,Promise.resolve()}))}initializeAsync(){return o(this,void 0,void 0,(function*(){const e=this.requestJsonAsync(this.api.nodesApi,"POST",{userid:123}),t=this.getPermission(),i=this.getSetting(),r=yield e;this.nodes=d.toFileHierarchyNode(r),this.activeNode=this.nodes,this.userHistory.push(this.nodes),yield t,yield i,this.components.forEach((e=>e.initialize()))}))}static initialize(e){const t=document.createElement("div");t.setAttribute("data-fm-tree","tree");const i=document.createElement("div");i.setAttribute("data-fm-container","container");const r=document.createElement("div");r.setAttribute("class","clr"),e.appendChild(t),e.appendChild(i),e.appendChild(r);const n=document.createElement("div");n.setAttribute("class","clr");const a=document.createElement("hr"),o=document.createElement("div");o.setAttribute("data-fm-controller","body");const d=document.createElement("div");d.setAttribute("data-fm-controller","arrowKey");const s=document.createElement("button");s.setAttribute("data-fm-arrowKey","next"),s.setAttribute("disabled","disabled"),s.append(">");const l=document.createElement("button");l.setAttribute("data-fm-arrowKey","prev"),l.setAttribute("disabled","disabled"),l.append("<"),d.appendChild(l),d.appendChild(s);const c=document.createElement("div");c.setAttribute("data-fm-path","path"),o.appendChild(d),o.appendChild(c),o.appendChild(n),i.appendChild(o),i.appendChild(a);const p=document.createElement("div");return p.setAttribute("data-fm-view","content"),i.appendChild(p),[t,p,c]}static toFileHierarchyNode(e){const t=function(e,i){const r={parent:e,data:i.data,childs:null,isFolder:!!i.childs};return i.childs&&(r.childs=null==i?void 0:i.childs.map((e=>t(r,e)))),r};return t(null,e)}addFiles(e){let t=[];for(let i of e){const e={file:i};Reflect.set(e,this.options.titleField,i.name),Reflect.set(e,this.options.mimeField,i.type),Reflect.set(e,this.options.sizeField,i.size);const r=i.type,n=i.size,a={source:i.name,hasError:!1,message:""},o=this.userPermission.mimePermission.find((e=>e.mime===r));if(o)if(o.size>=n){const t=this.addNode(e,!1);a.message=t.message,a.hasError=t.hasError}else a.message="size error",a.hasError=!0;else a.message="mime error",a.hasError=!0;t.push(a)}return t}addFolder(e){return this.addNode(e,!0)}addNode(e,t){const i=this.activeNode.isFolder?this.activeNode:this.activeNode.parent,r=this.options.titleField,n=i.childs.find((t=>Reflect.get(t.data,r)==Reflect.get(e,r))),a={source:Reflect.get(e,r),hasError:!1,message:""};if(n)a.message="duplicate file or folder",a.hasError=!0;else{const r={parent:i,data:e,childs:t?[]:null,isFolder:t};i.childs.push(r),this.components.forEach((e=>{try{e.nodeAdded(r)}catch(t){console.error(`Error in run nodeAdded for ${e}`,t)}})),a.message="file or folder added",a.hasError=!1}return a}syncDataAsync(){return o(this,void 0,void 0,(function*(){const e=this.nodes,t=this.options.keyField,i=[];this.findClientNodes(e,i);const r=function(e,i){return o(this,void 0,void 0,(function*(){const e={data:i.data,parent:Reflect.get(i.parent.data,t),childs:i.childs,isFolder:i.isFolder},n=i.data.file;if(n){const t=new Promise((e=>{const t=new FileReader;t.onload=function(t){e(t.target.result)},t.readAsDataURL(n)}));e.data.fileContent=yield t,delete e.data.file}else if(i.childs){const t=null==i?void 0:i.childs.map((t=>o(this,void 0,void 0,(function*(){return r(e,t)}))));e.childs=yield Promise.all(t)}return e}))},n=i.map((e=>o(this,void 0,void 0,(function*(){return r(null,e)})))),a=yield Promise.all(n);var d=JSON.stringify(a);return console.log(d),[]}))}findClientNodes(e,t){const i=this.options.keyField;Reflect.get(e.data,i)||t.push(e),e.childs&&e.childs.forEach((e=>{this.findClientNodes(e,t)}))}updateUI(e){if(this.activeNode!=e){const t=this.userHistory.length;this.historyCurrentIndex<t-1&&this.userHistory.splice(this.historyCurrentIndex+1,t-this.historyCurrentIndex),this.userHistory.push(e),this.historyCurrentIndex=this.userHistory.length-1,this.activeNode=e,this.components.forEach((t=>{try{t.updateUI(e)}catch(e){console.error(`Error in updateUI for ${t}`,e)}}));const i=this.prevKey.getAttribute("disabled");this.userHistory.length>1&&"disabled"==i&&this.prevKey.removeAttribute("disabled")}}browseHistory(e){const t="prev"==e?1:-1;this.historyCurrentIndex=this.historyCurrentIndex-t,this.activeNode=this.userHistory[this.historyCurrentIndex],this.components.forEach((e=>{try{e.updateUI(this.activeNode)}catch(t){console.error(`Error in updateUI for ${e}`,t)}}));const i=this.nextKey.getAttribute("disabled");this.userHistory.length>1&&this.historyCurrentIndex!=this.userHistory.length-1&&"disabled"==i&&this.nextKey.removeAttribute("disabled")}addingHandler(){var e,t;null===(e=this.prevKey)||void 0===e||e.addEventListener("click",(e=>{const t=this.historyCurrentIndex;t>0&&this.browseHistory("prev"),1==t&&this.prevKey.setAttribute("disabled","disabled")})),null===(t=this.nextKey)||void 0===t||t.addEventListener("click",(e=>{const t=this.historyCurrentIndex;t<this.userHistory.length-1&&this.browseHistory("next"),t+1==this.userHistory.length-1&&this.nextKey.setAttribute("disabled","disabled")}))}requestJsonAsync(e,t="GET",i){return o(this,void 0,void 0,(function*(){const r={method:t};if(i){const e=new FormData;for(const t in i)e.append(t,Reflect.get(i,t));r.body=e}const n=yield fetch(e,r);return yield n.json()}))}static createFileManagerAsync(e,t){return o(this,void 0,void 0,(function*(){const i=new d(e,t,t.api?t.api:{nodesApi:"server/nodes"});return yield i.initializeAsync(),i}))}}},910:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});class r{constructor(){this.mimeList=new Map,i(509).forEach((e=>{e.mime.forEach((t=>{this.mimeList.set(t,e.url)}))}))}static get Current(){return r._Current||(r._Current=new r),r._Current}getMIMEImage(e,t){const i=document.createElement("img");if(i.setAttribute("width",`${t}px`),e){const r=this.mimeList.get(e);r?i.setAttribute("src",`assets/images/${r}-${t}.png`):i.setAttribute("src",`assets/images/file-unknown-${t}.png`)}else i.setAttribute("src",`assets/images/folder-${t}.png`);return i}}r._Current=null},888:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});class r{constructor(e,t){this.container=e,this.owner=t,this.map=new Map}initialize(){var e;const t=this.render(this.owner.nodes),i=document.createElement("ul");i.setAttribute("data-fm-tree-ul",""),null===(e=this.container)||void 0===e||e.appendChild(i).appendChild(t),this.activeElement=this.container.querySelectorAll('[data-fm-tree="title"]')[0],this.updateUI(this.owner.nodes),this.addingHandler()}nodeAdded(e){const t=Array.from(this.map.entries()).find((t=>t[1]==e.parent)),i=document.createElement("li");i.appendChild(this.renderLevel(e));const r=i.querySelectorAll('[data-fm-tree="title"]')[0];if(this.map.set(r,e),r.addEventListener("click",(e=>{e.stopPropagation(),this.owner.updateUI(this.map.get(r))})),1==e.isFolder){const e=document.createElement("ul");e.setAttribute("data-fm-tree-isExpand","true"),e.setAttribute("data-fm-tree-childs",""),i.appendChild(e)}t[0].parentElement.parentElement.querySelectorAll("[data-fm-tree-childs]")[0].appendChild(i)}renderLevel(e){const t=document.createElement("span");let i=document.createElement("span");i.setAttribute("data-fm-tree","title"),null!=e.childs&&(t.append("-"),t.setAttribute("data-fm-tree","expand"));let r=document.createTextNode(Reflect.get(e.data,this.owner.options.titleField));i.appendChild(r);const n=document.createElement("div");return n.setAttribute("data-fm-tree-row",""),n.appendChild(t),n.insertBefore(i,t.nextSibling),n}render(e){const t=document.createElement("li");if(t.appendChild(this.renderLevel(e)),this.map.set(t.querySelectorAll('[data-fm-tree="title"]')[0],e),e.childs){const i=document.createElement("ul");i.setAttribute("data-fm-tree-isExpand","true"),i.setAttribute("data-fm-tree-childs",""),t.appendChild(i),e.childs.forEach((e=>{i.appendChild(this.render(e))}))}return t}addingHandler(){this.container.querySelectorAll('[data-fm-tree="expand"]').forEach((e=>{e.addEventListener("click",(t=>{const i=e.parentElement.closest("li").querySelectorAll("ul")[0];this.slideToggle(e,i)}))})),this.container.querySelectorAll('[data-fm-tree="title"]').forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation(),this.owner.updateUI(this.map.get(e))}))}))}updateUI(e){var t;if(e!=this.activeNode){const i=Array.from(this.map.entries()).find((t=>t[1]==e));i&&(this.activeNode=e,null===(t=this.activeElement)||void 0===t||t.removeAttribute("data-fm-tree-isSelected"),this.activeElement=i[0],this.activeElement.setAttribute("data-fm-tree-isSelected","true"))}}slideToggle(e,t){"false"==t.getAttribute("data-fm-tree-isExpand")?(e.innerHTML="-",t.setAttribute("data-fm-tree-isExpand","true"),t.style.display="block"):(e.innerHTML="+",t.setAttribute("data-fm-tree-isExpand","false"),t.style.display="none")}}},26:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(910);class n{constructor(e,t){this.container=e,this.owner=t}initialize(){this.initializeUI(),this.createPermissionBtnUI(),this.folderName=this.container.querySelector('[data-fm-input="folderName"]'),this.folderDesc=this.container.querySelector('[data-fm-textarea="description"]'),this.file=this.container.querySelector('[data-fm-input="file"]'),this.updateUI(this.owner.nodes),this.addingHandler()}initializeUI(){const e=document.createElement("div");e.setAttribute("class","clr");const t=document.createElement("div");t.setAttribute("data-fm-view","controller");const i=document.createElement("i");i.setAttribute("class","lni lni-grid-alt");const r=document.createElement("button");r.appendChild(i),r.append(this.owner.culture.tileView),r.setAttribute("data-fm-view-mode","tile");const n=document.createElement("i");n.setAttribute("class","lni lni-list");const a=document.createElement("button");a.appendChild(n),a.append(this.owner.culture.gridView),a.setAttribute("data-fm-view-mode","grid");const o=document.createElement("i");o.setAttribute("class","lni lni-cloud-sync");const d=document.createElement("button");d.appendChild(o),d.append(this.owner.culture.syncBtn),d.setAttribute("data-fm-view-sync","data");const s=document.createElement("div");s.setAttribute("data-fm-user","permission"),t.appendChild(s),t.appendChild(r),t.appendChild(a),t.appendChild(d),t.appendChild(e);const l=document.createElement("div");l.setAttribute("data-fm-view","view");const c=document.createElement("div");c.setAttribute("class","clr"),this.container.appendChild(t),this.container.appendChild(l),this.container.appendChild(c)}createPermissionBtnUI(){const e=this.container.querySelector('[data-fm-view="controller"]'),t=this.container.querySelector('[data-fm-view-mode="tile"]'),i=this.container.querySelector('[data-fm-user="permission"]');if(1==this.owner.userPermission.createFolder){const i=document.createElement("div");i.setAttribute("data-fm-folderDialogBox","background"),i.setAttribute("data-fm-display","none");const r=document.createElement("div");r.setAttribute("data-fm-folderDialogBox","container");const n=document.createElement("div");n.setAttribute("data-fm-dialogBox","addFolder");const a=document.createElement("div");a.setAttribute("data-fm-folderDialogBox","closeBox");const o=document.createElement("div");o.setAttribute("data-fm-folderDialogBox","close"),o.append("X"),a.appendChild(o);const d=document.createElement("form");d.setAttribute("data-fm-dialogBox-form","createFolder");const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("data-fm-input","folderName"),s.setAttribute("name","folderName"),s.setAttribute("placeholder",this.owner.culture.folderName);const l=document.createElement("textarea");l.setAttribute("data-fm-textarea","description"),l.setAttribute("name","description");const c=document.createElement("button");c.setAttribute("data-fm-dialogBox-btn","createFolder"),c.append(this.owner.culture.createFolderBtn),n.appendChild(a),r.appendChild(n),d.appendChild(s),d.appendChild(l),d.appendChild(c),n.appendChild(d),this.container.appendChild(i),this.container.appendChild(r);const p=document.createElement("i");p.setAttribute("class","lni lni-folder");const u=document.createElement("button");u.appendChild(p),u.append(this.owner.culture.newFolder),u.setAttribute("data-fm-view-add","folder"),e.insertBefore(u,t)}if(0==this.owner.userPermission.uploadPermission){const e=document.createElement("span");e.append(this.owner.culture.denyUploadMessage),e.setAttribute("data-fm-user","uploadPermit"),i.appendChild(e)}else{const r=document.createElement("span");r.setAttribute("data-fm-user","usedSize"),r.append(`${this.owner.culture.totalSize} : ${this.owner.userPermission.totalSize} KB`);const n=document.createElement("span");n.setAttribute("data-fm-user","totalSize"),n.append(`${this.owner.culture.usedSize} : ${this.owner.userPermission.usedSize} KB`);const a=document.createElement("i");a.setAttribute("class","lni lni-add-files");const o=document.createElement("button");o.appendChild(a),o.append(this.owner.culture.newFile),o.setAttribute("data-fm-view-add","file"),i.appendChild(r),i.appendChild(n),e.insertBefore(o,t);const d=document.createElement("div");d.setAttribute("data-fm-fileDialogBox","background"),d.setAttribute("data-fm-display","none");const s=document.createElement("div");s.setAttribute("data-fm-fileDialogBox","container");const l=document.createElement("div");l.setAttribute("data-fm-dialogBox","addFile");const c=document.createElement("div");c.setAttribute("data-fm-fileDialogBox","closeBox");const p=document.createElement("div");p.setAttribute("data-fm-fileDialogBox","close"),p.append("X"),c.appendChild(p);const u=document.createElement("form");u.setAttribute("data-fm-dialogBox-form","uploadFile");const m=document.createElement("input");m.setAttribute("data-fm-input","file"),m.setAttribute("type","file"),m.setAttribute("name","myFiles"),m.setAttribute("multiple","multiple");const h=document.createElement("button");h.setAttribute("data-fm-dialogBox-btn","addFile"),h.append(this.owner.culture.uploadBtn),l.appendChild(u),u.appendChild(m),u.appendChild(h),l.appendChild(c),s.appendChild(l),l.appendChild(u),this.container.appendChild(d),this.container.appendChild(s)}}nodeAdded(e){this.activeNode==e.parent&&(this.container.querySelector('[data-fm-view="view"]').innerHTML="","grid"==this.owner.userSetting.viewMode?this.renderGrid(this.activeNode):this.renderTile(this.activeNode))}renderGrid(e){this.container.querySelector('[data-fm-view="view"]').innerHTML="";const t=document.createElement("table"),i=document.createElement("thead");this.owner.options.gridViewFields.forEach((e=>{const t=document.createElement("th");t.setAttribute("class","textCenter");let r=document.createTextNode(e.title);t.setAttribute("width","15%"),t.setAttribute("align","right"),t.appendChild(r),i.appendChild(t)})),t.appendChild(i);const n=this.owner.options.mimeField,a=r.Z.Current;e.childs.forEach((e=>{const i=document.createElement("tr"),r=Reflect.get(e.data,n);this.owner.options.gridViewFields.forEach((t=>{const n=document.createElement("td");n.setAttribute("class","textCenter");const o=Reflect.get(e.data,t.fieldName),d=o?document.createTextNode(o):document.createTextNode("-");if(t.fieldName==this.owner.options.titleField){const t=document.createElement("span");t.setAttribute("data-fm-view-field","title"),t.appendChild(d),n.setAttribute("class","textLeft"),n.appendChild(a.getMIMEImage(r,32)),n.appendChild(t),e.isFolder&&(null==t||t.addEventListener("dblclick",(t=>{this.owner.updateUI(e)})))}else if(t.fieldName==this.owner.options.urlField){if(!e.isFolder){const e=document.createElement("a");e.setAttribute("data-fm-view-download","icon"),e.setAttribute("href",`/${d.textContent}`),n.appendChild(e)}}else n.appendChild(d);i.appendChild(n)})),t.appendChild(i)})),this.container.querySelector("[data-fm-view='view']").appendChild(t)}renderTile(e){var t;this.container.querySelector('[data-fm-view="view"]').innerHTML="";const i=this.owner.options.mimeField,n=r.Z.Current,a=document.createElement("div");e.childs.forEach((e=>{const t=document.createElement("div");t.setAttribute("data-fm-view","items");const r=Reflect.get(e.data,i);t.appendChild(n.getMIMEImage(r,64)),this.owner.options.tileViewFields.forEach((i=>{const r=document.createElement("div");r.setAttribute(`data-fm-view-${i.fieldName}`,i.fieldName);const n=Reflect.get(e.data,i.fieldName),a=n?document.createTextNode(n):document.createTextNode("");if(i.fieldName==this.owner.options.urlField){if(!e.isFolder){const e=document.createElement("a");e.setAttribute("data-fm-view-download","icon"),e.setAttribute("href",`/${a.textContent}`),r.appendChild(e)}}else if(i.fieldName==this.owner.options.sizeField){if(!e.isFolder){const e=document.createElement("span");e.append(`${this.owner.culture.fileSizeTitle} :${a.textContent} KB`),e.setAttribute("data-fm-view-size","text"),r.appendChild(e)}}else r.appendChild(a);t.appendChild(r)})),e.isFolder&&t.addEventListener("dblclick",(t=>{this.owner.updateUI(e)})),a.appendChild(t)})),null===(t=this.container.querySelector('[data-fm-view="view"]'))||void 0===t||t.appendChild(a)}closeCreateFolderPopup(){this.container.querySelector('[data-fm-folderDialogBox="background"]').style.display="none",this.container.querySelector('[data-fm-folderDialogBox="container"]').style.display="none",this.folderName.value="",this.folderDesc.value=""}closeUploadFilePopup(){this.container.querySelector('[data-fm-fileDialogBox="background"]').style.display="none",this.container.querySelector('[data-fm-fileDialogBox="container"]').style.display="none",this.file.value=""}addingHandler(){var e,t,i,r,n,a;["tile","grid"].forEach((e=>{this.container.querySelector(`[data-fm-view-mode="${e}"]`).addEventListener("click",(t=>{this.owner.userSetting.viewMode!=e&&(this.owner.userSetting.viewMode=e,"grid"==e?this.renderGrid(this.activeNode):this.renderTile(this.activeNode))}))})),null===(e=this.container.querySelector('[data-fm-view-add="folder"]'))||void 0===e||e.addEventListener("click",(e=>{this.container.querySelector('[data-fm-folderDialogBox="background"]').style.display="block",this.container.querySelector('[data-fm-folderDialogBox="container"]').style.display="block"})),null===(t=this.container.querySelector('[data-fm-dialogBox-btn="createFolder"]'))||void 0===t||t.addEventListener("click",(e=>{if(""!=this.folderName.value){const e={title:this.folderName.value,description:this.folderDesc.value};this.owner.addFolder(e)}e.preventDefault(),this.closeCreateFolderPopup()})),null===(i=this.container.querySelector('[data-fm-folderDialogBox="close"]'))||void 0===i||i.addEventListener("click",(e=>{this.closeCreateFolderPopup()})),null===(r=this.container.querySelector('[data-fm-view-add="file"]'))||void 0===r||r.addEventListener("click",(e=>{this.container.querySelector('[data-fm-fileDialogBox="background"]').style.display="block",this.container.querySelector('[data-fm-fileDialogBox="container"]').style.display="block"})),null===(n=this.container.querySelector('[data-fm-dialogBox-btn="addFile"]'))||void 0===n||n.addEventListener("click",(e=>{e.preventDefault();let t=[];const i=this.file.files;for(let e of i)t.push(e);this.closeUploadFilePopup(),this.owner.addFiles(t)})),null===(a=this.container.querySelector('[data-fm-fileDialogBox="close"]'))||void 0===a||a.addEventListener("click",(e=>{this.closeUploadFilePopup()})),this.container.querySelector('[data-fm-view-sync="data"]').addEventListener("click",(e=>{this.owner.syncDataAsync()}))}updateUI(e){e!=this.activeNode&&(0==e.isFolder&&(e=e.parent),this.activeNode=e,"grid"==this.owner.userSetting.viewMode?this.renderGrid(this.activeNode):this.renderTile(this.activeNode))}}},283:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});class r{constructor(e,t){this.owner=t,this.container=e}initialize(){this.initializeUI(),this.updateUI(this.owner.nodes)}initializeUI(){const e=document.createElement("div");e.setAttribute("data-fm-path","startPath"),e.append(this.owner.culture.pathTitle),this.container.appendChild(e)}nodeAdded(e){}updateUI(e){var t;if(this.activeNode!=e){this.activeNode=e,null===(t=this.container.querySelectorAll('[data-fm-path="splitter"],[data-fm-path="node"]'))||void 0===t||t.forEach((e=>{e.remove()}));let i=e;for(;i;){const e=i,t=this.container.querySelector('[data-fm-path="startPath"]'),r=document.createElement("span");r.setAttribute("data-fm-path","splitter"),r.textContent="/";const n=document.createElement("span");n.setAttribute("data-fm-path","node"),n.textContent=Reflect.get(e.data,this.owner.options.titleField),this.container.insertBefore(n,t.nextSibling),this.container.insertBefore(r,t.nextSibling),n.addEventListener("click",(t=>{t.preventDefault(),this.owner.updateUI(e)})),i=e.parent}}}}},167:(e,t,i)=>{"use strict";e.exports=i.p+"f931536246b9de4a4cbc.png"},509:e=>{"use strict";e.exports=JSON.parse('[{"mime":["text/css"],"url":"file-css"},{"mime":["text/javascript","application/x-javascript","application/javascript","application/javascript"],"url":"file-js"},{"mime":["application/x-troff-msvideo","video/avi","video/msvideo","video/x-msvideo","video/quicktime","video/mpeg","video/x-mpeg","video/x-ms-asf","video/mp4","video/x-flv","video/3gp"],"url":"file-video"},{"mime":["image/jpg","image/jpeg"],"url":"file-jpg"},{"mime":["image/png"],"url":"file-png"},{"mime":["image/gif"],"url":"file-gif"},{"mime":["image/svg+xml"],"url":"file-svg"},{"mime":["image/ico","image/x-icon","application/ico","application/x-ico"],"url":"file-ico"},{"mime":["image/x-win-bitmap"],"url":"file-bitmap"},{"mime":["image/webp"],"url":"file-webp"},{"mime":["font/opentype"],"url":"file-opentype"},{"mime":["application/x-font-ttf"],"url":"file-ttf"},{"mime":["application/font-woff","application/x-font-woff"],"url":"file-woff"},{"mime":["application/font-otf","application/x-font-otf"],"url":"file-otf"},{"mime":["application/font-woff2"],"url":"file-woff"},{"mime":["text/xml","Application/xml","application/atom+xml","application/rss+xml"],"url":"file-xml"},{"mime":["audio/mpeg3","audio/x-mpeg-3","audio/mp3","audio/mpeg"],"url":"file-audio"},{"mime":["application/excel","application/vnd.ms-excel","application/x-excel","application/x-msexcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],"url":"file-xls"},{"mime":["application/pdf","application/octet-stream"],"url":"file-pdf"},{"mime":["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],"url":"file-doc"},{"mime":["text/html"],"url":"file-html"},{"mime":["application/x-shockwave-flash"],"url":"file-fla"},{"mime":["application/mspowerpoint","application/powerpoint","application/vnd.ms-powerpoint","application/x-mspowerpoint"],"url":"file-ppt"},{"mime":["application/zip","application/x-zip-compressed","application/x-zip-compressed"],"url":"file-zip"},{"mime":["application/x-rar-compressed"],"url":"file-rar"},{"mime":["application/json"],"url":"file-json"},{"mime":["text/plain"],"url":"file-txt"}]')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),__webpack_require__.b=document.baseURI||self.location.href;var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{fileManager:()=>e});const e=__webpack_require__(949).Z})(),bc=__webpack_exports__})();